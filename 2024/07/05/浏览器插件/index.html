<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>浏览器插件 | zhengjiaxi的博客</title><meta name="author" content="zhengjiaxi"><meta name="copyright" content="zhengjiaxi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Chrome浏览器插件开发是一种基于谷歌Chrome浏览器的扩展程序开发。通过创建插件，开发者可以为用户提供额外的功能，以增强浏览器的使用体验。本文将介绍Chrome浏览器插件开发的基本流程、相关技术和工具。不光是chrome浏览器，包括opera、edge以及360等浏览器都已经切换至chromium内核，所以都支持使用chrome浏览器插件。同时通过插件，用户可以定制自己的浏览器，添加各种实用">
<meta property="og:type" content="article">
<meta property="og:title" content="浏览器插件">
<meta property="og:url" content="https://github.com/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/index.html">
<meta property="og:site_name" content="zhengjiaxi的博客">
<meta property="og:description" content="Chrome浏览器插件开发是一种基于谷歌Chrome浏览器的扩展程序开发。通过创建插件，开发者可以为用户提供额外的功能，以增强浏览器的使用体验。本文将介绍Chrome浏览器插件开发的基本流程、相关技术和工具。不光是chrome浏览器，包括opera、edge以及360等浏览器都已经切换至chromium内核，所以都支持使用chrome浏览器插件。同时通过插件，用户可以定制自己的浏览器，添加各种实用">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-gpjo6e_1920x1080.png">
<meta property="article:published_time" content="2024-07-05T17:59:56.000Z">
<meta property="article:modified_time" content="2024-09-11T12:06:58.974Z">
<meta property="article:author" content="zhengjiaxi">
<meta property="article:tag" content="前端 浏览器插件">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-gpjo6e_1920x1080.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://github.com/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '浏览器插件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-09-11 12:06:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="referrer" content="never"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="zhengjiaxi的博客"><span class="site-name">zhengjiaxi的博客</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">浏览器插件</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-07-05T17:59:56.000Z" title="Created 2024-07-05 17:59:56">2024-07-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-09-11T12:06:58.974Z" title="Updated 2024-09-11 12:06:58">2024-09-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/bo%E2%80%98k/">bo‘k</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="浏览器插件"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p>Chrome浏览器插件开发是一种基于谷歌Chrome浏览器的扩展程序开发。通过创建插件，开发者可以为用户提供额外的功能，以增强浏览器的使用体验。本文将介绍Chrome浏览器插件开发的基本流程、相关技术和工具。<br>不光是chrome浏览器，包括opera、edge以及360等浏览器都已经切换至chromium内核，所以都支持使用chrome浏览器插件。同时通过插件，用户可以定制自己的浏览器，添加各种实用功能，如广告拦截（adblock）、翻译工具（谷歌翻译）、密码管理（Dashlane）等。<br>浏览器开发文档：<br>  chrome：扩展程序 &#x2F; 开发  |  Chrome for Developers<br>  firefox: Build a cross-browser extension - Mozilla | MDN<br>  edge: 将 Chrome 扩展移植到 Microsoft Edge - Microsoft Edge Developer documentation | Microsoft Learn<br>  360: 360安全浏览器开放平台<br>  搜狗: 搜狗高速浏览器-带您开启迅捷之旅 (qq.com)</p>
<ol>
<li>Chrome浏览器插件可以做什么</li>
<li>插件的展示形式<br>大多数扩展程序都需要某种类型的用户互动才能正常运行。扩展程序平台提供了多种方式来向您的扩展程序添加互动。<br>浏览器插件的主要展示形式有很多形式例如：<br>1.工具栏按钮：这是最常见的形式之一。插件会在浏览器的工具栏上添加一个图标，用户可以点击这个图标来访问插件的功能或设置。例如，Adblock Plus和Grammarly等插件都使用这种方式。弹出窗口：当用户点击工具栏按钮时，插件可以显示一个弹出窗口（Popup），这个窗口可以包含各种用户界面元素，如按钮、输入框、菜单等，用于与用户交互。<br>2.侧边栏：有些插件会在浏览器的侧边栏中显示其界面，这种形式通常用于需要持续显示信息或工具的插件。例如，Evernote Web Clipper和OneNote Web Clipper等插件。<br>3.页面内嵌内容：插件可以直接在当前网页上嵌入内容或修改网页的DOM结构。例如，翻译插件可以在网页上直接显示翻译结果，广告拦截插件可以隐藏广告元素。<br>4.背景页（Background Page）：一些插件会在后台运行一个隐藏的页面，用于处理长时间运行的任务或保持与服务器的持续通信。用户通常不会直接与背景页交互，但它可以支持插件的其他部分。<br>5.上下文菜单：插件可以在右键菜单中添加自定义选项，允许用户在特定元素上使用插件的功能。例如，右键点击图片时，可以选择通过某个插件下载或分享图片。<br>6.通知：插件可以使用浏览器的通知系统向用户发送通知。这种形式通常用于提醒用户某些事件或状态变化，例如邮件通知插件会在收到新邮件时发送通知。<br>7.新标签页或主页改造：一些插件会修改浏览器的新标签页或主页，以展示特定的信息或功能。例如，一些生产力插件会在新标签页显示待办事项列表、日历等。</li>
<li>控制浏览器<br>借助 Chrome 的扩展程序 API，可以改变浏览器的工作方式：<br>1.覆盖 Chrome 页面和设置项：Manifest.json 配置 chrome_settings_overrides<br>2.扩展开发者工具：Manifest.json 配置 devtools_page<br>3.显示通知：chrome.notifications API<br>4.管理历史记录：chrome.history API<br>5.控制标签页和窗口：chrome.tabs、chrome.tabGroups 和 chrome.windows 等 API<br>6.键盘快捷键：chrome.commands API<br>7.身份认证：chrome.identity API<br>8.管理插件：chrome.management API<br>9.提供建议：chrome.omnibox API<br>10.更新 Chrome 设置：chrome.proxy API<br>11.下载管理：chrome.downloads API<br>12.书签：chrome.bookmarks API<br>13….<br>扩展程序 &#x2F; 开发  |  Chrome for Developers</li>
<li>控制页面与网络<br>可以通过注入脚本、拦截网络请求以及使用 Web API 与网页进行交互，来控制和修改 Web：<br>1.注入 JS 和 CSS 文件<br>2.访问当前 Tab 页<br>3.控制 Web 请求<br>4.录音和屏幕截图<br>5.修改网站设置 等等</li>
<li>Chrome浏览器插件的基本结构<br>Chrome浏览器插件主要由以下四个部分组成：<br>  manifest.json：插件的元数据文件，包含了插件的名称、版本、权限等信息。<br>  popup.html：插件的弹出窗口HTML文件，用于展示插件的内容。<br>  popup.js：插件的JavaScript代码文件，用于处理用户的交互事件。<br>  styles.css：插件的CSS样式文件，用于美化插件的界面。<br>1.Manifest（清单）<br>Chrome 插件的清单是唯一且必须具有特定文件名的必需文件：manifest.json；该文件列出了有关该扩展程序的结构和行为的重要信息。<br>1{<br>2  “manifest_version”: 3,<br>3  “name”: “Demo 插件”,<br>4  “version”: “0.0.1”,<br>5  “description”: “My Chrome Extension Description”,<br>6  “icons”: {<br>7    “16”: “icons&#x2F;icon16.png”,<br>8    “48”: “icons&#x2F;icon48.png”,<br>9    “128”: “icons&#x2F;icon128.png”<br>10  },<br>11}<br>12<br>1.1必填字段<br>1.manifest_version：用于指定扩展程序使用的清单文件格式版本，目前是 3，从2019年以后chrome就开始支持3版本的拆件<br>2.name：插件名称，一般情况下 hover 插件图标展示的文案也是 name<br>3.version：插件版本<br>1.2发布 应用商店需要的字段<br>1.name<br>2.version<br>3.description<br>4.icons<br><img src="https://i-blog.csdnimg.cn/direct/fe9e39c5ccf549b89a93c573c1a7ed28.png" alt="在这里插入图片描述"><br>2.Action（操作项）<br>控制扩展程序在 Chrome 浏览器工具栏中的配置。<br>1{<br>2  “manifest_version”: 3,<br>3  “name”: “Demo 插件”,<br>4  “version”: “0.0.1”,<br>5  “description”: “My Chrome Extension Description”,<br>6  “icons”: {<br>7    “16”: “icons&#x2F;icon16.png”,<br>8    “48”: “icons&#x2F;icon48.png”,<br>9    “128”: “icons&#x2F;icon128.png”<br>10  },<br>11  “action”: {<br>12    “default_icon”: “icons&#x2F;icon.png”,<br>13    “default_title”: “Demo default_title”,<br>14    “default_popup”: “popup&#x2F;index.html”<br>15  },<br>16}<br>17<br>1.default_icon：工具栏展示的图片<br>2.default_title：hover 插件图标展示的文案<br>3.default_popup：点击图标弹出的页面<br><img src="https://i-blog.csdnimg.cn/direct/c83bd88fc00a4357a69eeca37773f142.png" alt="在这里插入图片描述"><br>3.Content scripts（内容脚本）<br>在宿主网页环境中运行 JavaScript 或 CSS。 通过 content_scripts 进行注册。<br>1{<br>2  “manifest_version”: 3,<br>3  “name”: “Demo 插件”,<br>4  “version”: “0.0.1”,<br>5  “description”: “My Chrome Extension Description”,<br>6  “icons”: {<br>7    “16”: “icons&#x2F;icon16.png”,<br>8    “48”: “icons&#x2F;icon48.png”,<br>9    “128”: “icons&#x2F;icon128.png”<br>10  },<br>11  “content_scripts”: [<br>12    {<br>13      “matches”: [“<a target="_blank" rel="noopener" href="https://git.woa.com/*%22]">https://git.woa.com/*&quot;]</a>,</li>
</ol>
<p>14      “js”: [“content&#x2F;index.js”],<br>15      “css”: [“content&#x2F;index.css”]<br>16    }<br>17  ]<br>18}<br>19<br><img src="https://i-blog.csdnimg.cn/direct/b85de40536714ef6a244cba1dd6a0c88.png" alt="在这里插入图片描述"><br>(<a target="_blank" rel="noopener" href="https://i-blog.csdnimg.cn/direct/a00ddfc378164ab8abb64fe8349dfe02.png">https://i-blog.csdnimg.cn/direct/a00ddfc378164ab8abb64fe8349dfe02.png</a>)<br>4.Background - Service Worker(背景)<br>Service Worker 在后台运行并处理浏览器事件<br>1{<br>2  “manifest_version”: 3,<br>3  “name”: “Demo 插件”,<br>4  “version”: “0.0.1”,<br>5  “description”: “My Chrome Extension Description”,<br>6  “icons”: {<br>7    “16”: “icons&#x2F;icon16.png”,<br>8    “48”: “icons&#x2F;icon48.png”,<br>9    “128”: “icons&#x2F;icon128.png”<br>10  },<br>11  “action”: {<br>12    “default_icon”: “icons&#x2F;icon.png”,<br>13    “default_title”: “Demo default_title”,<br>14    “default_popup”: “popup&#x2F;index.html”<br>15  },<br>16  “background”: {<br>17    “service_worker”: “background&#x2F;service_worker.js”,<br>18    “type”: “module”<br>19  },<br>20}<br>21<br>1.1 激活态<br><img src="https://i-blog.csdnimg.cn/direct/7fa968f4c137441db12d9175c577c7b5.png" alt="在这里插入图片描述"><br>1.2 无效状态<br><img src="https://i-blog.csdnimg.cn/direct/1604f4ebc9db4e85933454877114f0a1.png" alt="在这里插入图片描述"><br>浏览器为了减少内存跟性能消耗，会让插件在用户停止交互、页面关闭或刷新、任务完成或定时任务结束时会从活跃变为不活跃。<br>1.单个请求的处理用时超过 5 分钟。<br>2.fetch 响应的传递时间超过 30 秒时<br>5.结构示意<br><img src="https://i-blog.csdnimg.cn/direct/04590ba3cace4cd1939821ad2a1589dd.png" alt="在这里插入图片描述"><br>3. 插件开发流程<br>Chrome浏览器插件开发的基本流程：<br>1.配置Manifest.json<br>1{<br>2  “manifest_version”: 3,<br>3  “name”: “Demo 插件”,<br>4  “version”: “0.0.1”,<br>5  “description”: “My Chrome Extension Description”,<br>6  “icons”: {<br>7    “16”: “icons&#x2F;icon16.png”,<br>8    “48”: “icons&#x2F;icon48.png”,<br>9    “128”: “icons&#x2F;icon128.png”<br>10  },<br>11  “action”: {<br>12    “default_icon”: “icons&#x2F;icon.png”,<br>13    “default_title”: “Demo default_title”,<br>14    “default_popup”: “popup&#x2F;index.html”<br>15  },<br>16  “side_panel”: {<br>17    “default_path”: “popup&#x2F;index.html”<br>18  },<br>19  “background”: {<br>20    “service_worker”: “background&#x2F;service_worker.js”,<br>21    “type”: “module”<br>22  },<br>23  “permissions”: [<br>24    “activeTab”,<br>25    “sidePanel”,<br>26    “notifications”<br>27  ],<br>28  “content_scripts”: [<br>29    {<br>30      “matches”: [“<a target="_blank" rel="noopener" href="https://git.woa.com/*%22]">https://git.woa.com/*&quot;]</a>,<br>31      “js”: [“content&#x2F;index.js”],<br>32      “css”: [“content&#x2F;index.css”]<br>33    }<br>34  ]<br>35}<br>36<br>2.添加popup.html<br>1<!DOCTYPE html><br>2<html lang="en"><br>3<head><br>4  <meta charset="UTF-8"><br>5  <meta name="viewport" content="width=device-width, initial-scale=1.0"><br>6  <title>Document</title><br>7  <link rel="stylesheet" href="./index.css"><br>8</head><br>9<body><br>10  <div class="plugin_search"><br>11      <div class="plugin_search_bar"><br>12          <input id="plugin_search_inp" /><br>13          <input id="plugin_search_but" type="button" value="翻译" /><br>14      </div><br>15      <div class="plugin_span"><br>16          <span>翻译此页面</span><br>17      </div><br>18  </div><br>19<br>20  <div class="plugin_footer"><br>21      <span>© 2015 Google -</span><br>22      <a target="_blank" href="https://google.com/">扩展程序选项</a><br>23      <a target="_blank" href="https://translate.google.com/?source=gtx">Google 翻译</a><br>24  </div><br>25</body><br>26<script src="./index.js"></script><br>27</html><br>28<br>3.添加background<br>1&#x2F;&#x2F; part1 （模块化引入）<br>2import ‘.&#x2F;module_1.js’<br>3import ‘.&#x2F;module_2.js’<br>4<br>5&#x2F;&#x2F; part2  （调用chrome内核消息推送）<br>6chrome.runtime.onMessage.addListener(async (message, sender, sendResponse) &#x3D;&gt; {<br>7  if (message.action &#x3D;&#x3D;&#x3D; ‘fromPopup’) {<br>8    chrome.notifications.create(<br>9      {<br>10        type: “basic”,<br>11        title: “Notifications Title”,<br>12        message: “Notifications message to display”,<br>13        iconUrl: “..&#x2F;icons&#x2F;icon.png”<br>14      },<br>15      (notificationId) &#x3D;&gt; {<br>16        console.log(‘notificationId–&gt;’, notificationId)<br>17      }<br>18    );<br>19  }<br>20  if (message.action &#x3D;&#x3D;&#x3D; ‘fromContent’) {<br>21    chrome.notifications.create(<br>22      {<br>23        type: “basic”,<br>24        title: “Notifications Title”,<br>25        message: “Notifications message to display”,<br>26        iconUrl: “..&#x2F;icons&#x2F;icon.png”<br>27      },<br>28      (notificationId) &#x3D;&gt; {<br>29        console.log(‘notificationId–&gt;’, notificationId)<br>30      }<br>31    );<br>32  }<br>33<br>34});<br>35<br>tips：mac下的提示是通过mac自身的消息推送的，所以要打开设置中关于浏览器消息的推送开关<br>4.content（内容脚本注入）<br>1&#x2F;&#x2F; part1 获取content 页面的上下文<br>2&#x2F;&#x2F; console.log(‘this is content js’)<br>3&#x2F;&#x2F; console.log(‘document’, document)<br>4&#x2F;&#x2F; console.log(‘location’, location)<br>5&#x2F;&#x2F; console.log(‘window’, window)<br>6<br>7&#x2F;&#x2F; <a target="_blank" rel="noopener" href="https://git.woa.com/djt/merchant-console">https://git.woa.com/djt/merchant-console</a><br>8<br>9&#x2F;&#x2F; part2 （往页面上注入元素）<br>10var targetElement &#x3D; document.querySelectorAll(‘.tw-mb-3&gt;div’)[1];<br>11&#x2F;&#x2F; 创建一个新的 input 元素<br>12var input &#x3D; document.createElement(‘input’);<br>13<br>14input.className &#x3D; ‘git-input’;<br>15input.type &#x3D; ‘text’;<br>16input.placeholder &#x3D; ‘直接输入文件路径’;<br>17targetElement.insertBefore(input, targetElement.firstChild);<br>18<br>19input.addEventListener(‘keydown’, function(event) {<br>20    if (event.key &#x3D;&#x3D;&#x3D; ‘Enter’ || event.keyCode &#x3D;&#x3D;&#x3D; 13) {<br>21        var inputValue &#x3D; input.value;<br>22        &#x2F;&#x2F; src&#x2F;Router&#x2F;Merchant&#x2F;Ecommerce&#x2F;EcommerceDomain&#x2F;Create&#x2F;index.tsx<br>23        var targetUrl &#x3D; ‘<a target="_blank" rel="noopener" href="https://git.woa.com/djt/merchant-console/blob/develop/">https://git.woa.com/djt/merchant-console/blob/develop/</a>‘ + inputValue;<br>24        window.location.href &#x3D; targetUrl;<br>25    }<br>26});<br>27<br>28&#x2F;&#x2F; 将按钮添加到目标元素中<br>29targetElement.insertBefore(input, targetElement.firstChild);<br>30<br>5.content与background通信<br>1&#x2F;&#x2F; part3 页面通信<br>2var targetElement &#x3D; document.querySelectorAll(‘.tw-mb-3&gt;div’)[1];<br>3&#x2F;&#x2F; 创建一个新的 input 元素<br>4var button &#x3D; document.createElement(‘button’);<br>5<br>6button.className &#x3D; ‘git-button’;<br>7button.innerHTML &#x3D; ‘页面通信’;<br>8targetElement.insertBefore(button, targetElement.firstChild);<br>9<br>10button.addEventListener(‘click’, function() {<br>11    chrome.runtime.sendMessage({action: “fromContent”});<br>12});<br>13<br>14&#x2F;&#x2F; 将按钮添加到目标元素中<br>15targetElement.insertBefore(button, targetElement.firstChild);<br>16<br>17<br><img src="https://i-blog.csdnimg.cn/direct/a2353df88f2246bd9d5a79a8e1962144.png" alt="在这里插入图片描述"><br>6.popup.html与content通信<br>1const plugin_search_but &#x3D; document.getElementById(‘plugin_search_but’)<br>2const plugin_search_inp &#x3D; document.getElementById(‘plugin_search_inp’)<br>3plugin_search_but.onclick &#x3D; function () {<br>4    &#x2F;&#x2F; alert(‘输入的值为：’ + plugin_search_inp.value.trim())<br>5    console.log(‘chrome’, chrome)<br>6    chrome.runtime.sendMessage({<br>7        action: ‘fromPopup’,<br>8        message: ‘Hello from Popup!’<br>9    });<br>10}<br>11<br><img src="https://i-blog.csdnimg.cn/direct/c6b53dd7c7ec42ac80dfddf048095f71.png" alt="在这里插入图片描述"><br>7.fetch请求<br>1var targetElement &#x3D; document.querySelectorAll(‘.tw-mb-3&gt;div’)[1];<br>2&#x2F;&#x2F; 创建一个新的 input 元素<br>3var button &#x3D; document.createElement(‘button’);<br>4<br>5button.className &#x3D; ‘git-button’;<br>6button.innerHTML &#x3D; ‘接口请求’;<br>7targetElement.insertBefore(button, targetElement.firstChild);<br>8<br>9button.addEventListener(‘click’, function () {<br>10    fetch(‘<a target="_blank" rel="noopener" href="http://localhost:3000/today-date">http://localhost:3000/today-date</a>‘)<br>11        .then(response &#x3D;&gt; response.json())<br>12        .then(data &#x3D;&gt; {<br>13            console.log(data);<br>14            const { date } &#x3D; data;<br>15            var targetElement &#x3D; document.querySelectorAll(‘.tw-mb-3&gt;div’)[1];<br>16            &#x2F;&#x2F; 创建一个新的 input 元素<br>17            var span &#x3D; document.createElement(‘span’);<br>18<br>19            span.innerHTML &#x3D; <code>今天的日期是：$&#123;date&#125;</code>;<br>20            targetElement.insertBefore(span, targetElement.firstChild);<br>21<br>22        })<br>23        .catch(error &#x3D;&gt; console.error(‘Error:’, error));<br>24});<br>25<br>26&#x2F;&#x2F; 将按钮添加到目标元素中<br>27targetElement.insertBefore(button, targetElement.firstChild);<br>4.打包Chrome插件</p>
<p><img src="https://i-blog.csdnimg.cn/direct/f822b9bdd13c407daf3a83077df5ebb8.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/99db466a89fa441fbd57309b5a4eb40e.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/5d57548f9ebb4e4b8edd7f298014affe.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/aef185cb8e9c4fe1998a225438f420c5.png" alt="在这里插入图片描述"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://github.com">zhengjiaxi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://github.com/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/">https://github.com/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/">前端 浏览器插件</a></div><div class="post_share"><div class="social-share" data-image="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-gpjo6e_1920x1080.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/20/Web%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/" title="Web前端性能优化"><img class="cover" src="https://cdn.pixabay.com/photo/2021/09/05/16/48/rapeseed-6599950_960_720.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Web前端性能优化</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/02/git%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3/" title="git 用户名邮箱配置"><img class="cover" src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-yxjppd_1920x1080.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">git 用户名邮箱配置</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">zhengjiaxi</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" href="https://github.com/zhengzhengzzzz"><i class="fab fa-github"></i><span>Star</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">分享开发经验</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/11/Web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="No title"><img src="https://cdn.pixabay.com/photo/2021/09/05/16/48/rapeseed-6599950_960_720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/2024/09/11/Web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="No title">No title</a><time datetime="2024-09-11T12:06:58.958Z" title="Created 2024-09-11 12:06:58">2024-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/25/React%E5%8E%9F%E7%90%86/" title="react原理学习"><img src="https://cdn.pixabay.com/photo/2021/09/05/16/48/rapeseed-6599950_960_720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="react原理学习"/></a><div class="content"><a class="title" href="/2024/07/25/React%E5%8E%9F%E7%90%86/" title="react原理学习">react原理学习</a><time datetime="2024-07-25T20:34:27.000Z" title="Created 2024-07-25 20:34:27">2024-07-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/20/Web%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/" title="Web前端性能优化"><img src="https://cdn.pixabay.com/photo/2021/09/05/16/48/rapeseed-6599950_960_720.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Web前端性能优化"/></a><div class="content"><a class="title" href="/2024/07/20/Web%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%80%BB%E7%BB%93/" title="Web前端性能优化">Web前端性能优化</a><time datetime="2024-07-20T16:34:27.000Z" title="Created 2024-07-20 16:34:27">2024-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/" title="浏览器插件"><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-gpjo6e_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浏览器插件"/></a><div class="content"><a class="title" href="/2024/07/05/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/" title="浏览器插件">浏览器插件</a><time datetime="2024-07-05T17:59:56.000Z" title="Created 2024-07-05 17:59:56">2024-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/02/git%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3/" title="git 用户名邮箱配置"><img src="https://lmy-1311156074.cos.ap-nanjing.myqcloud.com/test/wallhaven-yxjppd_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git 用户名邮箱配置"/></a><div class="content"><a class="title" href="/2024/07/02/git%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3/" title="git 用户名邮箱配置">git 用户名邮箱配置</a><time datetime="2024-07-02T20:34:27.000Z" title="Created 2024-07-02 20:34:27">2024-07-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By zhengjiaxi</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>